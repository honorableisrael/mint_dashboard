{"ast":null,"code":"import axios from\"axios\";import{deleteToken,getToken}from\"./helper\";import{notify,root}from'../../config';var logout=function logout(){deleteToken();var redirectUrl=window.location.pathname;return window.location.href=\"/login?redirect=\"+redirectUrl;};var Connector=axios.create();Connector.interceptors.request.use(function(config){config.baseURL=root;console.log(getToken());if(getToken()!==\"undefined\"){config.headers[\"Authorization\"]=getToken()?\"Bearer \".concat(getToken()):\"\";}config.headers[\"Content-Type\"]=\"application/json\";config.headers[\"Accept\"]=\"application/json\";return config;},function(error){return Promise.reject(error);});Connector.interceptors.response.use(function(response){console.log(response);return response;},function(error){var _error$response,_error$response$data,_error$response2,_error$response3;console.error('error_status',error.response);notify(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message);if((error===null||error===void 0?void 0:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===401||(error===null||error===void 0?void 0:(_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===404){notify(\"Failed to process please try again later\");}return Promise.reject(error);});export default Connector;","map":{"version":3,"sources":["/Users/frontenddev/Documents/MedPharm/src/Components/Services/services.ts"],"names":["axios","deleteToken","getToken","notify","root","logout","redirectUrl","window","location","pathname","href","Connector","create","interceptors","request","use","config","baseURL","console","log","headers","error","Promise","reject","response","data","message","status"],"mappings":"AACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,CAAsBC,QAAtB,KAAsC,UAAtC,CAEA,OAASC,MAAT,CAAiBC,IAAjB,KAA6B,cAA7B,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBJ,WAAW,GACX,GAAMK,CAAAA,WAAW,CAAGC,MAAM,CAACC,QAAP,CAAgBC,QAApC,CACA,MAAQF,CAAAA,MAAM,CAACC,QAAP,CAAgBE,IAAhB,CAAuB,mBAAqBJ,WAApD,CACD,CAJD,CAMA,GAAMK,CAAAA,SAAS,CAAGX,KAAK,CAACY,MAAN,EAAlB,CAEAD,SAAS,CAACE,YAAV,CAAuBC,OAAvB,CAA+BC,GAA/B,CACE,SAACC,MAAD,CAAY,CACVA,MAAM,CAACC,OAAP,CAAiBb,IAAjB,CACAc,OAAO,CAACC,GAAR,CAAYjB,QAAQ,EAApB,EACA,GAAGA,QAAQ,KAAK,WAAhB,CAA4B,CAC1Bc,MAAM,CAACI,OAAP,CAAe,eAAf,EAAkClB,QAAQ,oBAAcA,QAAQ,EAAtB,EAA2B,EAArE,CACD,CACDc,MAAM,CAACI,OAAP,CAAe,cAAf,EAAiC,kBAAjC,CACAJ,MAAM,CAACI,OAAP,CAAe,QAAf,EAA2B,kBAA3B,CACA,MAAOJ,CAAAA,MAAP,CACD,CAVH,CAWE,SAACK,KAAD,CAAW,CACT,MAAOC,CAAAA,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP,CACD,CAbH,EAeAV,SAAS,CAACE,YAAV,CAAuBW,QAAvB,CAAgCT,GAAhC,CACE,SAACS,QAAD,CAAc,CACZN,OAAO,CAACC,GAAR,CAAYK,QAAZ,EACA,MAAOA,CAAAA,QAAP,CACD,CAJH,CAKE,SAACH,KAAD,CAAW,4EACTH,OAAO,CAACG,KAAR,CAAc,cAAd,CAA8BA,KAAK,CAACG,QAApC,EACArB,MAAM,CAACkB,KAAD,SAACA,KAAD,kCAACA,KAAK,CAAEG,QAAR,gEAAC,gBAAiBC,IAAlB,+CAAC,qBAAuBC,OAAxB,CAAN,CACA,GAAI,CAAAL,KAAK,OAAL,EAAAA,KAAK,SAAL,0BAAAA,KAAK,CAAEG,QAAP,4DAAiBG,MAAjB,IAA4B,GAA5B,EAAmC,CAAAN,KAAK,OAAL,EAAAA,KAAK,SAAL,0BAAAA,KAAK,CAAEG,QAAP,4DAAiBG,MAAjB,IAA4B,GAAnE,CAAwE,CACtExB,MAAM,CAAC,0CAAD,CAAN,CACD,CACD,MAAOmB,CAAAA,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP,CACD,CAZH,EAeA,cAAeV,CAAAA,SAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { deleteToken, getToken } from \"./helper\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { notify, root } from '../../config';\n\nconst logout = () => {\n  deleteToken();\n  const redirectUrl = window.location.pathname;\n  return (window.location.href = \"/login?redirect=\" + redirectUrl);\n};\n\nconst Connector = axios.create();\n\nConnector.interceptors.request.use(\n  (config) => {\n    config.baseURL = root;\n    console.log(getToken())\n    if(getToken()!==\"undefined\"){\n      config.headers[\"Authorization\"] = getToken()? `Bearer ${getToken()}`:\"\";\n    }\n    config.headers[\"Content-Type\"] = \"application/json\";\n    config.headers[\"Accept\"] = \"application/json\";\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\nConnector.interceptors.response.use(\n  (response) => {\n    console.log(response)\n    return response;\n  },\n  (error) => {\n    console.error('error_status', error.response);\n    notify(error?.response?.data?.message)\n    if (error?.response?.status === 401 || error?.response?.status === 404) {\n      notify(\"Failed to process please try again later\")\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default Connector;"]},"metadata":{},"sourceType":"module"}
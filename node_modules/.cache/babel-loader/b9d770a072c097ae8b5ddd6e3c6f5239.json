{"ast":null,"code":"import _defineProperty from\"/Users/frontenddev/Documents/FC INVENTORY/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _asyncToGenerator from\"/Users/frontenddev/Documents/FC INVENTORY/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/frontenddev/Documents/FC INVENTORY/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/frontenddev/Documents/FC INVENTORY/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/frontenddev/Documents/FC INVENTORY/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import{Alert}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import Connector from\"../../Services/services\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ResetCode=function ResetCode(props){var _useState=useState({code:\"\",password:\"\",emailAddress:\"\",newPassword:\"\",isloading:false,errorMessage:\"\",success:\"\"}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var code=state.code,emailAddress=state.emailAddress,newPassword=state.newPassword,success=state.success,errorMessage=state.errorMessage,isloading=state.isloading;var validateForm=function validateForm(e){e.preventDefault();if(!newPassword){return setState(_objectSpread(_objectSpread({},state),{},{errorMessage:\"New password is required\"}));}if(!emailAddress){return setState(_objectSpread(_objectSpread({},state),{},{errorMessage:\"Email address is required\"}));}submitForm();};var submitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data_,response,data,_error$response,_error$response$data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setState(_objectSpread(_objectSpread({},state),{},{isloading:true}));data_={newPassword:newPassword,emailAddress:emailAddress};_context.prev=2;_context.next=5;return Connector.post(\"/changepassword/\".concat(props.match.params.code),data_);case 5:response=_context.sent;data=response.data.data;console.log(response);setState(_objectSpread(_objectSpread({},state),{},{success:\"Password reset successful\",isloading:false}));setTimeout(function(){window.location.assign(\"/login\");},3000);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);setState(_objectSpread(_objectSpread({},state),{},{errorMessage:(_context.t0===null||_context.t0===void 0?void 0:(_error$response=_context.t0.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.newPassword)+\"Password reset failed\",isloading:false}));case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function submitForm(){return _ref.apply(this,arguments);};}();var onchange=function onchange(e){var _objectSpread2;setState(_objectSpread(_objectSpread({},state),{},(_objectSpread2={},_defineProperty(_objectSpread2,e.target.name,e.target.value),_defineProperty(_objectSpread2,\"errorMessage\",\"\"),_objectSpread2)));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid lgwrap lgwra2p\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-5 loginformbody\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ft3\",children:\"Reset your password\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-wrapper\",onSubmit:validateForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-header\",children:[errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"signinalertmssg\",children:/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:errorMessage})}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"signinalertmssg\",children:/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:success})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"padded-signin-wrapper\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"inputlabel\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"rdfrmlbl\",children:[\" \",\"Email Address \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"}),\" \"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"emailAddress\",value:emailAddress,onChange:onchange,placeholder:\"Enter email\",size:60,className:\"form-control forminput\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"inputlabel\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"rdfrmlbl\",children:[\" \",\"New Password \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"}),\" \"]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"newPassword\",value:newPassword,onChange:onchange,placeholder:\"Enter new password\",size:60,className:\"form-control forminput\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"forgotpassword\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-btn-wrapper loginbtdv\",children:/*#__PURE__*/_jsx(\"input\",{className:\"signinbtn\",type:\"submit\",onSubmit:validateForm,value:isloading?\"Submitting...\":\"Submit\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"signuprgqt1\",children:\"\\xA9 Farmcrowdy\"})]})]})]})})})});};export default ResetCode;","map":{"version":3,"sources":["/Users/frontenddev/Documents/FC INVENTORY/src/Components/views/auth/ResetCode.tsx"],"names":["React","useState","Alert","Link","Connector","ResetCode","props","code","password","emailAddress","newPassword","isloading","errorMessage","success","state","setState","validateForm","e","preventDefault","submitForm","data_","post","match","params","response","data","console","log","setTimeout","window","location","assign","onchange","target","name","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Col, Row, Container, Alert, Button } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport Connector from \"../../Services/services\";\nimport { setTokenUtils } from \"../../Services/helper\";\n\nconst ResetCode = (props) => {\n  const [state, setState] = useState({\n    code: \"\",\n    password: \"\",\n    emailAddress: \"\",\n    newPassword: \"\",\n    isloading: false,\n    errorMessage: \"\",\n    success: \"\",\n  });\n  const { code, emailAddress, newPassword, success, errorMessage, isloading } =\n    state;\n  const validateForm = (e) => {\n    e.preventDefault();\n    if (!newPassword) {\n      return setState({\n        ...state,\n        errorMessage: \"New password is required\",\n      });\n    }\n    if (!emailAddress) {\n      return setState({\n        ...state,\n        errorMessage: \"Email address is required\",\n      });\n    }\n    submitForm();\n  };\n  const submitForm = async () => {\n    setState({\n      ...state,\n      isloading: true,\n    });\n    const data_ = {\n      newPassword,\n      emailAddress,\n    };\n    try {\n      const response = await Connector.post(\n        `/changepassword/${props.match.params.code}`,\n        data_\n      );\n      const {\n        data: { data },\n      } = response;\n      console.log(response);\n      setState({\n        ...state,\n        success: \"Password reset successful\",\n        isloading: false,\n      });\n      setTimeout(() => {\n        window.location.assign(\"/login\");\n      }, 3000);\n    } catch (error) {\n      setState({\n        ...state,\n        errorMessage:\n          error?.response?.data?.newPassword + \"Password reset failed\",\n        isloading: false,\n      });\n    }\n  };\n  const onchange = (e) => {\n    setState({\n      ...state,\n      [e.target.name]: e.target.value,\n      errorMessage: \"\",\n    });\n  };\n  return (\n    <>\n      <div className=\"container-fluid lgwrap lgwra2p\">\n        <div className=\"row justify-center\">\n          <div className=\"col-md-5 loginformbody\">\n            <div className=\"ft3\">Reset your password</div>\n            <form className=\"form-wrapper\" onSubmit={validateForm}>\n              <div className=\"form-header\">\n                {errorMessage && (\n                  <div className=\"signinalertmssg\">\n                    <Alert variant={\"danger\"}>{errorMessage}</Alert>\n                  </div>\n                )}\n                {success && (\n                  <div className=\"signinalertmssg\">\n                    <Alert variant={\"info\"}>{success}</Alert>\n                  </div>\n                )}\n              </div>\n              <div className=\"padded-signin-wrapper\">\n                {/* <label className=\"inputlabel\">\n                  <span className=\"rdfrmlbl\">\n                    {\" \"}\n                    Code <span className=\"text-danger\">*</span>{\" \"}\n                  </span>\n                  <input\n                    type=\"text\"\n                    name=\"code\"\n                    value={code}\n                    onChange={onchange}\n                    placeholder=\"Enter code\"\n                    size={60}\n                    className=\"form-control forminput\"\n                  />\n                </label> */}\n                <label className=\"inputlabel\">\n                  <span className=\"rdfrmlbl\">\n                    {\" \"}\n                    Email Address <span className=\"text-danger\">*</span>{\" \"}\n                  </span>\n                  <input\n                    type=\"text\"\n                    name=\"emailAddress\"\n                    value={emailAddress}\n                    onChange={onchange}\n                    placeholder=\"Enter email\"\n                    size={60}\n                    className=\"form-control forminput\"\n                  />\n                </label>\n                <label className=\"inputlabel\">\n                  <span className=\"rdfrmlbl\">\n                    {\" \"}\n                    New Password <span className=\"text-danger\">*</span>{\" \"}\n                  </span>\n                  <input\n                    type=\"password\"\n                    name=\"newPassword\"\n                    value={newPassword}\n                    onChange={onchange}\n                    placeholder=\"Enter new password\"\n                    size={60}\n                    className=\"form-control forminput\"\n                  />\n                </label>\n                <div className=\"forgotpassword\">\n                  <Link to=\"/login\">Login </Link>\n                </div>\n                <div className=\"form-btn-wrapper loginbtdv\">\n                  <input\n                    className=\"signinbtn\"\n                    type=\"submit\"\n                    onSubmit={validateForm}\n                    value={isloading ? \"Submitting...\" : \"Submit\"}\n                  />\n                </div>\n                <p className=\"signuprgqt1\">Â© Farmcrowdy</p>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ResetCode;\n"]},"metadata":{},"sourceType":"module"}
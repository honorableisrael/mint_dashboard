{"ast":null,"code":"import axios from \"axios\";\nimport { deleteToken, getToken } from \"./helper\";\nimport { notify, root } from '../../config';\n\nconst logout = () => {\n  deleteToken();\n  const redirectUrl = window.location.pathname;\n  return window.location.href = \"/login?redirect=\" + redirectUrl;\n};\n\nconst Connector = axios.create();\nConnector.interceptors.request.use(config => {\n  config.baseURL = root;\n  console.log(getToken());\n\n  if (getToken() !== \"undefined\") {\n    config.headers[\"Authorization\"] = getToken() ? `Bearer ${getToken()}` : \"\";\n  }\n\n  config.headers[\"Content-Type\"] = \"application/json\";\n  config.headers[\"Accept\"] = \"application/json\";\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nConnector.interceptors.response.use(response => {\n  console.log(response);\n  return response;\n}, error => {\n  var _error$response, _error$response3, _error$response3$data, _error$response4, _error$response5;\n\n  if ((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 503) {\n    var _error$response2, _error$response2$data;\n\n    return notify(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error);\n  }\n\n  console.error('error_status', error.response);\n  notify(error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message);\n\n  if ((error === null || error === void 0 ? void 0 : (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 401 || (error === null || error === void 0 ? void 0 : (_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status) === 404) {\n    notify(\"Failed to process please try again later\");\n  }\n\n  return Promise.reject(error);\n});\nexport default Connector;","map":{"version":3,"sources":["/Users/frontenddev/Documents/FC INVENTORY/src/Components/Services/services.ts"],"names":["axios","deleteToken","getToken","notify","root","logout","redirectUrl","window","location","pathname","href","Connector","create","interceptors","request","use","config","baseURL","console","log","headers","error","Promise","reject","response","status","data","message"],"mappings":"AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,UAAtC;AAEA,SAASC,MAAT,EAAiBC,IAAjB,QAA6B,cAA7B;;AAEA,MAAMC,MAAM,GAAG,MAAM;AACnBJ,EAAAA,WAAW;AACX,QAAMK,WAAW,GAAGC,MAAM,CAACC,QAAP,CAAgBC,QAApC;AACA,SAAQF,MAAM,CAACC,QAAP,CAAgBE,IAAhB,GAAuB,qBAAqBJ,WAApD;AACD,CAJD;;AAMA,MAAMK,SAAS,GAAGX,KAAK,CAACY,MAAN,EAAlB;AAEAD,SAAS,CAACE,YAAV,CAAuBC,OAAvB,CAA+BC,GAA/B,CACGC,MAAD,IAAY;AACVA,EAAAA,MAAM,CAACC,OAAP,GAAiBb,IAAjB;AACAc,EAAAA,OAAO,CAACC,GAAR,CAAYjB,QAAQ,EAApB;;AACA,MAAIA,QAAQ,OAAO,WAAnB,EAAgC;AAC9Bc,IAAAA,MAAM,CAACI,OAAP,CAAe,eAAf,IAAkClB,QAAQ,KAAM,UAASA,QAAQ,EAAG,EAA1B,GAA8B,EAAxE;AACD;;AACDc,EAAAA,MAAM,CAACI,OAAP,CAAe,cAAf,IAAiC,kBAAjC;AACAJ,EAAAA,MAAM,CAACI,OAAP,CAAe,QAAf,IAA2B,kBAA3B;AACA,SAAOJ,MAAP;AACD,CAVH,EAWGK,KAAD,IAAW;AACT,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAbH;AAgBAV,SAAS,CAACE,YAAV,CAAuBW,QAAvB,CAAgCT,GAAhC,CACGS,QAAD,IAAc;AACZN,EAAAA,OAAO,CAACC,GAAR,CAAYK,QAAZ;AACA,SAAOA,QAAP;AACD,CAJH,EAKGH,KAAD,IAAW;AAAA;;AACT,MAAI,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,+BAAAA,KAAK,CAAEG,QAAP,oEAAiBC,MAAjB,MAA4B,GAAhC,EAAqC;AAAA;;AACnC,WAAOtB,MAAM,CAACkB,KAAD,aAACA,KAAD,2CAACA,KAAK,CAAEG,QAAR,8EAAC,iBAAiBE,IAAlB,0DAAC,sBAAuBL,KAAxB,CAAb;AACD;;AACDH,EAAAA,OAAO,CAACG,KAAR,CAAc,cAAd,EAA8BA,KAAK,CAACG,QAApC;AACArB,EAAAA,MAAM,CAACkB,KAAD,aAACA,KAAD,2CAACA,KAAK,CAAEG,QAAR,8EAAC,iBAAiBE,IAAlB,0DAAC,sBAAuBC,OAAxB,CAAN;;AACA,MAAI,CAAAN,KAAK,SAAL,IAAAA,KAAK,WAAL,gCAAAA,KAAK,CAAEG,QAAP,sEAAiBC,MAAjB,MAA4B,GAA5B,IAAmC,CAAAJ,KAAK,SAAL,IAAAA,KAAK,WAAL,gCAAAA,KAAK,CAAEG,QAAP,sEAAiBC,MAAjB,MAA4B,GAAnE,EAAwE;AACtEtB,IAAAA,MAAM,CAAC,0CAAD,CAAN;AACD;;AACD,SAAOmB,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAfH;AAkBA,eAAeV,SAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { deleteToken, getToken } from \"./helper\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { notify, root } from '../../config';\n\nconst logout = () => {\n  deleteToken();\n  const redirectUrl = window.location.pathname;\n  return (window.location.href = \"/login?redirect=\" + redirectUrl);\n};\n\nconst Connector = axios.create();\n\nConnector.interceptors.request.use(\n  (config) => {\n    config.baseURL = root;\n    console.log(getToken())\n    if (getToken() !== \"undefined\") {\n      config.headers[\"Authorization\"] = getToken() ? `Bearer ${getToken()}` : \"\";\n    }\n    config.headers[\"Content-Type\"] = \"application/json\";\n    config.headers[\"Accept\"] = \"application/json\";\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\nConnector.interceptors.response.use(\n  (response) => {\n    console.log(response)\n    return response;\n  },\n  (error) => {\n    if (error?.response?.status === 503) {\n      return notify(error?.response?.data?.error)\n    }\n    console.error('error_status', error.response);\n    notify(error?.response?.data?.message)\n    if (error?.response?.status === 401 || error?.response?.status === 404) {\n      notify(\"Failed to process please try again later\")\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default Connector;"]},"metadata":{},"sourceType":"module"}
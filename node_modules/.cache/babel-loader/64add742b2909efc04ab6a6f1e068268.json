{"ast":null,"code":"import React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { deleteToken, getToken } from \"./helper\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { notify } from \"../helpers\";\nimport Swal from \"sweetalert2/dist/sweetalert2.js\";\nimport \"sweetalert2/src/sweetalert2.scss\";\nimport { Redirect } from \"react-router\";\n\nconst logout = () => {\n  deleteToken();\n  const redirectUrl = window.location.pathname;\n  return window.location.href = \"/login?redirect=\" + redirectUrl;\n};\n\nconst Connector = axios.create();\nConnector.interceptors.request.use(config => {\n  config.baseURL = process.env.REACT_APP_API_HOST;\n  config.headers[\"Authorization\"] = getToken() && `Bearer ${getToken()}`;\n  config.headers[\"Content-Type\"] = \"application/json\";\n  config.headers[\"Accept\"] = \"application/json\";\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nConnector.interceptors.response.use(response => {\n  return response;\n}, error => {\n  var _error$response, _error$response2;\n\n  // console.error('error_status', error.response.status);\n  if ((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401 || (error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 404) {\n    Swal.fire({\n      title: \"Session Expired\",\n      showCancelButton: true,\n      preConfirm: logout\n    }).then(result => {\n      if (result.isConfirmed) {}\n    });\n  }\n\n  return Promise.reject(error);\n});\nexport default Connector;","map":{"version":3,"sources":["/Users/frontenddev/Documents/MedPharm/src/Components/Services/services.js"],"names":["React","useEffect","axios","deleteToken","getToken","Link","useHistory","notify","Swal","Redirect","logout","redirectUrl","window","location","pathname","href","Connector","create","interceptors","request","use","config","baseURL","process","env","REACT_APP_API_HOST","headers","error","Promise","reject","response","status","fire","title","showCancelButton","preConfirm","then","result","isConfirmed"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,UAAtC;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,SAASC,MAAT,QAAuB,YAAvB;AACA,OAAOC,IAAP,MAAiB,iCAAjB;AACA,OAAO,kCAAP;AACA,SAASC,QAAT,QAAyB,cAAzB;;AAEA,MAAMC,MAAM,GAAG,MAAM;AACnBP,EAAAA,WAAW;AACX,QAAMQ,WAAW,GAAGC,MAAM,CAACC,QAAP,CAAgBC,QAApC;AACA,SAAQF,MAAM,CAACC,QAAP,CAAgBE,IAAhB,GAAuB,qBAAqBJ,WAApD;AACD,CAJD;;AAMA,MAAMK,SAAS,GAAGd,KAAK,CAACe,MAAN,EAAlB;AAEAD,SAAS,CAACE,YAAV,CAAuBC,OAAvB,CAA+BC,GAA/B,CACGC,MAAD,IAAY;AACVA,EAAAA,MAAM,CAACC,OAAP,GAAiBC,OAAO,CAACC,GAAR,CAAYC,kBAA7B;AACAJ,EAAAA,MAAM,CAACK,OAAP,CAAe,eAAf,IAAkCtB,QAAQ,MAAO,UAASA,QAAQ,EAAG,EAArE;AACAiB,EAAAA,MAAM,CAACK,OAAP,CAAe,cAAf,IAAiC,kBAAjC;AACAL,EAAAA,MAAM,CAACK,OAAP,CAAe,QAAf,IAA2B,kBAA3B;AACA,SAAOL,MAAP;AACD,CAPH,EAQGM,KAAD,IAAW;AACT,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAVH;AAYAX,SAAS,CAACE,YAAV,CAAuBY,QAAvB,CAAgCV,GAAhC,CACGU,QAAD,IAAc;AACZ,SAAOA,QAAP;AACD,CAHH,EAIGH,KAAD,IAAW;AAAA;;AACT;AACA,MAAI,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,+BAAAA,KAAK,CAAEG,QAAP,oEAAiBC,MAAjB,MAA4B,GAA5B,IAAmC,CAAAJ,KAAK,SAAL,IAAAA,KAAK,WAAL,gCAAAA,KAAK,CAAEG,QAAP,sEAAiBC,MAAjB,MAA4B,GAAnE,EAAwE;AACtEvB,IAAAA,IAAI,CAACwB,IAAL,CAAU;AACRC,MAAAA,KAAK,EAAE,iBADC;AAERC,MAAAA,gBAAgB,EAAE,IAFV;AAGRC,MAAAA,UAAU,EAAEzB;AAHJ,KAAV,EAIG0B,IAJH,CAISC,MAAD,IAAY;AAClB,UAAIA,MAAM,CAACC,WAAX,EAAwB,CACvB;AACF,KAPD;AAQD;;AACD,SAAOV,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAjBH;AAoBA,eAAeX,SAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { deleteToken, getToken } from \"./helper\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { notify } from \"../helpers\";\nimport Swal from \"sweetalert2/dist/sweetalert2.js\";\nimport \"sweetalert2/src/sweetalert2.scss\";\nimport { Redirect } from \"react-router\";\n\nconst logout = () => {\n  deleteToken();\n  const redirectUrl = window.location.pathname;\n  return (window.location.href = \"/login?redirect=\" + redirectUrl);\n};\n\nconst Connector = axios.create();\n\nConnector.interceptors.request.use(\n  (config) => {\n    config.baseURL = process.env.REACT_APP_API_HOST;\n    config.headers[\"Authorization\"] = getToken() && `Bearer ${getToken()}`;\n    config.headers[\"Content-Type\"] = \"application/json\";\n    config.headers[\"Accept\"] = \"application/json\";\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\nConnector.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  (error) => {\n    // console.error('error_status', error.response.status);\n    if (error?.response?.status === 401 || error?.response?.status === 404) {\n      Swal.fire({\n        title: \"Session Expired\",\n        showCancelButton: true,\n        preConfirm: logout,\n      }).then((result) => {\n        if (result.isConfirmed) {\n        }\n      });\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default Connector;"]},"metadata":{},"sourceType":"module"}